<html>
	<head>
		<style>
		html, body {
			width: 100%;
			height: 100%;
			margin: 0px;
			border: 0;
			overflow: hidden; /*  Disable scrollbars */
			display: block;  /* No floating content on sides */
		}
		</style>
		
		<script src="cplot.js"></script>
		<script src="expression.js"></script>
		<script id="vertexShader" type="x-shader/x-vertex">
			attribute vec3 aPosition;

			varying vec2 v_z;

			void main() {
				v_z = aPosition.xy * vec2(8, 4.5);
				gl_Position = vec4(aPosition, 1);
			}


		</script>
		<script id="fragmentShader" type="x-shader/x-fragment">
		precision mediump float;
		varying vec2 v_z;
		
		vec2 c_exp(vec2 z) {
			return exp(z.x) * vec2(cos(z.y), sin(z.y));
		}

		vec2 c_abs(vec2 z) {
			return vec2(length(z), 0);
		}

		vec2 c_conj(vec2 z) {
			return vec2(z.x, -z.y);
		}

		vec2 c_ln(vec2 z) {
			float theta = atan(z.y, z.x);
			return vec2(log(length(z)), theta);
		}

		vec2 _mult(vec2 a, vec2 b) {
			return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);
		}

		vec2 _pow(vec2 a, vec2 b) {
			return c_exp(_mult(c_ln(a), b));
		}

		vec2 c_inv(vec2 z) {
			return c_conj(z)/ dot(z,z);
		}

		vec3 domain_color(vec2 z) {
			//hsv-rgb code taken from https://stackoverflow.com/questions/15095909/from-rgb-to-hsv-in-opengl-glsl
			float hue = atan(z.y, z.x);
			hue /= 2.0 * 3.1415926535898;
			if (hue < 0.0) hue += 1.0;
			float mag = atan(length(z));
			mag *= 2.0/3.1415926535898;
			vec3 c = vec3(hue, 1, 1);
			vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
			vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
			return mag * c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
		}
		
		void main() {
			//the rest of the shader comes from javascript
			
		</script>
	</head>
	<body onload="init()">
		<canvas id="plot"></canvas>
		
		<div id="wrapper">
			<form>
				<input id="textbox" type="text" value="z" style="position: absolute; left: 10%; top: 90%; width:80%; height:40px;">
			</form>
		</div>
		
	</body>
</html>


